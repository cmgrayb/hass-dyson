{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Renovate configuration for hass-dyson Home Assistant integration",
  "extends": [
    "config:recommended",
    ":semanticCommits",
    ":automergeBranch"
  ],
  "timezone": "UTC",
  "labels": ["dependencies"],
  "assignees": ["cmgrayb"],
  "reviewers": ["cmgrayb"],
  "dependencyDashboard": false,
  "commitMessagePrefix": "deps:",
  "commitMessageAction": "update",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "branchPrefix": "renovate/",
  "automerge": false,
  "platformAutomerge": false,
  "rebaseWhen": "conflicted",
  "rangeStrategy": "bump",
  "separateMinorPatch": false,
  "prCreation": "immediate",
  "platformCommit": "enabled",
  "gitIgnoredAuthors": ["Renovate Bot <bot@renovateapp.com>"],
  "branchConcurrentLimit": 0,
  "ignorePaths": [],
  "lockFileMaintenance": {
    "enabled": false
  },
  "osvVulnerabilityAlerts": true,
  "vulnerabilityAlerts": {
    "enabled": true,
    "minimumReleaseAge": "1 day"
  },
  "packageRules": [
    {
      "description": "Production dependencies - conservative updates",
      "matchFileNames": ["requirements.txt", "custom_components/hass_dyson/manifest.json"],
      "matchDepTypes": ["dependencies"],
      "prPriority": 5,
      "labels": ["dependencies", "production"],
      "groupName": "production dependencies",
      "groupSlug": "production-deps",
      "semanticCommitType": "deps",
      "semanticCommitScope": "prod"
    },
    {
      "description": "Development dependencies - faster updates",
      "matchFileNames": ["requirements-dev.txt"],
      "matchDepTypes": ["devDependencies"],
      "prPriority": 3,
      "labels": ["dependencies", "development"],
      "groupName": "development dependencies",
      "groupSlug": "dev-deps",
      "semanticCommitType": "deps",
      "semanticCommitScope": "dev"
    },
    {
      "description": "Code quality and testing tools",
      "matchPackageNames": [
        "ruff",
        "bandit",
        "pytest",
        "pytest-cov",
        "pytest-asyncio",
        "pytest-homeassistant-custom-component",
        "pytest-mock",
        "mypy",
        "safety"
      ],
      "prPriority": 4,
      "labels": ["dependencies", "code-quality"],
      "groupName": "code quality tools",
      "groupSlug": "code-quality",
      "semanticCommitType": "deps",
      "semanticCommitScope": "tools"
    },
    {
      "description": "Docker base images and system dependencies",
      "matchFileNames": [".devcontainer/Dockerfile"],
      "matchDepTypes": ["dockerfile"],
      "prPriority": 2,
      "labels": ["dependencies", "docker"],
      "groupName": "Docker dependencies",
      "groupSlug": "docker-deps",
      "semanticCommitType": "deps",
      "semanticCommitScope": "docker"
    },
    {
      "description": "Home Assistant core and related packages",
      "matchPackageNames": [
        "homeassistant",
        "pytest-homeassistant-custom-component"
      ],
      "prPriority": 6,
      "labels": ["dependencies", "homeassistant"],
      "groupName": "Home Assistant dependencies",
      "groupSlug": "ha-deps",
      "semanticCommitType": "deps",
      "semanticCommitScope": "ha"
    },
    {
      "description": "Security vulnerability fixes - immediate updates",
      "matchPackageNames": [
        "requests",
        "aiohttp",
        "paho-mqtt"
      ],
      "prPriority": 10,
      "labels": ["dependencies", "security"],
      "groupName": "security updates",
      "groupSlug": "security-deps",
      "semanticCommitType": "deps",
      "semanticCommitScope": "security"
    },
    {
      "description": "Cryptography - version range follows Home Assistant compatibility. Update allowedVersions when HA updates their cryptography pin. Check: https://github.com/home-assistant/core/blob/dev/requirements.txt",
      "matchPackageNames": ["cryptography"],
      "allowedVersions": ">=45.0.3 <46.0.0",
      "prPriority": 10,
      "labels": ["dependencies", "security", "homeassistant-constrained"],
      "groupName": "cryptography updates",
      "groupSlug": "cryptography-deps",
      "semanticCommitType": "deps",
      "semanticCommitScope": "security",
      "commitMessageTopic": "cryptography (HA compatible)",
      "commitMessageExtra": "to {{newVersion}} (HA compatible range: >=45.0.3 <46.0.0)"
    },
    {
      "description": "Dyson-specific libraries - careful updates",
      "matchPackageNames": [
        "libdyson-rest"
      ],
      "prPriority": 8,
      "labels": ["dependencies", "dyson"],
      "groupName": "Dyson libraries",
      "groupSlug": "dyson-libs",
      "semanticCommitType": "deps",
      "semanticCommitScope": "dyson",
      "reviewersFromCodeOwners": true
    }
  ],
  "pip_requirements": {
    "enabled": true,
    "fileMatch": [
      "^requirements\\.txt$",
      "^requirements-dev\\.txt$"
    ]
  },
  "dockerfile": {
    "enabled": true,
    "fileMatch": [
      "^\\.devcontainer/Dockerfile$"
    ]
  },
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": [
        "^custom_components/.*/manifest\\.json$"
      ],
      "matchStrings": [
        "\"requirements\"\\s*:\\s*\\[\\s*\"(?<depName>[^\"]+)==(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "pypi",
      "versioningTemplate": "pep440"
    }
  ]
}